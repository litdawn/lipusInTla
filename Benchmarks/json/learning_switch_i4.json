{"location":"line 1, col 1 to line 108, col 4 of module learning_switch_i4","moduleInfo":{"location":"line 1, col 1 to line 1, col 35 of module learning_switch_i4","moduleName":"learning_switch_i4"},"extends":{"extendedModuleNames":["TLC","Randomization"],"location":"line 4, col 1 to line 4, col 26 of module learning_switch_i4"},"body":{"declaredParams":[{"location":"line 6, col 1 to line 6, col 15 of module learning_switch_i4","paramName":"Packet"},{"location":"line 7, col 1 to line 7, col 13 of module learning_switch_i4","paramName":"Node"}],"definedVariables":[{"variableName":"pending"},{"variableName":"src"},{"variableName":"dst"},{"variableName":"link"},{"variableName":"route_dom"},{"variableName":"route_tc"}],"location":"line 6, col 1 to line 106, col 31 of module learning_switch_i4","operatorDefinitions":[{"concreteContent":"vars == <<pending,src,dst,link,route_dom,route_tc>>","location":"line 17, col 1 to line 17, col 51 of module learning_switch_i4","operatorName":"vars","type":"State"},{"concreteContent":"NewPacket(p) ==\n    /\\ pending' = pending \\cup {<<p,src[p],src[p]>>}\n    /\\ UNCHANGED <<src,dst,link,route_dom,route_tc>>\n","location":"line 19, col 1 to line 21, col 52 of module learning_switch_i4","operatorName":"NewPacket","paramNum":1,"type":"Action"},{"concreteContent":"Flood(p,sw0,sw1,sw2) == \n    /\\ <<p,sw0,sw1>> \\in pending\n    /\\ <<dst[p],sw1>> \\notin route_dom\n    /\\ LET cond1 == (<<src[p],sw1>> \\notin route_dom) /\\ (src[p] # sw1)\n           cond2 == dst[p] # sw1 IN \n           /\\ route_dom' = IF cond1 THEN route_dom \\cup {<<src[p],sw1>>} ELSE route_dom\n           /\\ route_tc' = IF cond1 \n                THEN ((route_tc \\ ({src[p]} \\X Node \\X Node)) \\cup\n                               {<<pa,x,y>> \\in ({src[p]} \\X Node \\X Node) : \n                                    (\\/ <<pa,x,y>> \\in route_tc \n                                     \\/ (<<pa,x,sw1>> \\in route_tc /\\ <<pa,sw0,y>> \\in route_tc))})\n                ELSE route_tc\n           /\\ pending' = IF cond2 \n                THEN ((pending \\ ({p} \\X {sw1} \\X Node)) \\cup\n                            {<<pa,sw1a,y>> \\in ({p} \\X {sw1} \\X Node) : link[sw1a]=y /\\ y # sw0})\n                ELSE pending\n    /\\ UNCHANGED <<src,dst,link>>\n","location":"line 23, col 1 to line 39, col 33 of module learning_switch_i4","operatorName":"Flood","paramNum":4,"type":"Action"},{"concreteContent":"Route(p,sw0,sw1,sw2) ==\n    /\\ <<p,sw0,sw1>> \\in pending\n    /\\ <<dst[p],sw1>> \\in route_dom\n    /\\ <<dst[p],sw1,sw2>> \\in route_tc \n    /\\ sw1 # sw2\n    /\\ \\A z \\in Node : (<<dst[p],sw1,z>> \\in route_tc /\\ sw1 # z) => (<<dst[p],sw2,z>> \\in route_tc)\n    /\\ LET cond1 == (<<src[p],sw1>> \\notin route_dom) /\\ (src[p] # sw1)\n           cond2 == dst[p] # sw1 IN \n            /\\ route_dom' = IF cond1 THEN route_dom \\cup {<<src[p],sw1>>} ELSE route_dom\n            /\\ route_tc' = IF cond1 \n                    THEN ((route_tc \\ ({src[p]} \\X Node \\X Node)) \\cup\n                                   {<<pa,x,y>> \\in ({src[p]} \\X Node \\X Node) : \n                                        (\\/ <<pa,x,y>> \\in route_tc \n                                         \\/ (<<pa, x, sw1>> \\in route_tc /\\ <<pa, sw0, y>> \\in route_tc))})\n                    ELSE route_tc\n            /\\ pending' = IF cond2 THEN pending \\cup {<<p,sw1,sw2>>} ELSE pending\n    /\\ UNCHANGED <<src,dst,link>>\n","location":"line 41, col 1 to line 57, col 33 of module learning_switch_i4","operatorName":"Route","paramNum":4,"type":"Action"},{"concreteContent":"Next ==\n    \\/ \\E p \\in Packet : NewPacket(p)\n    \\/ \\E p \\in Packet, sw0,sw1,sw2 \\in Node : Flood(p,sw0,sw1,sw2)\n    \\/ \\E p \\in Packet, sw0,sw1,sw2 \\in Node : Route(p,sw0,sw1,sw2)\n","location":"line 59, col 1 to line 62, col 67 of module learning_switch_i4","operatorName":"Next","type":"State"},{"concreteContent":"Init ==\n    /\\ route_dom = {}\n    /\\ route_tc = {<<n,x,y>> \\in Node \\X Node \\X Node : x = y}\n    /\\ pending = {}\n    /\\ src \\in [Packet -> Node]\n    /\\ dst \\in [Packet -> Node]\n    /\\ link \\in [Node -> Node]\n    \\* No self-loops in links.\n    /\\ \\A x \\in Node : link[x] # x\n    \\* Symmetric links.\n    /\\ \\A x,y \\in Node : (link[x] = y) => (link[y] = x)\n","location":"line 64, col 1 to line 74, col 55 of module learning_switch_i4","operatorName":"Init","type":"State"},{"concreteContent":"Safety ==\n    \\A n,x,y,z \\in Node : \n        /\\ <<n,x,x>> \\in route_tc\n        /\\ (<<n,x,y>> \\in route_tc /\\ <<n,y,z>> \\in route_tc) => <<n,x,z>> \\in route_tc\n        /\\ (<<n,x,y>> \\in route_tc /\\ <<n,y,x>> \\in route_tc) => (x = y)\n        /\\ <<n,x,y>> \\in route_tc /\\ <<n,x,z>> \\in route_tc => (<<n,y,z>> \\in route_tc \\/ <<n,z,y>> \\in route_tc)\n","location":"line 81, col 1 to line 86, col 113 of module learning_switch_i4","operatorName":"Safety","type":"State"},{"concreteContent":"TypeOK ==\n    /\\ route_dom \\in SUBSET (Node \\X Node)\n    /\\ route_tc \\in SUBSET (Node \\X Node \\X Node)\n    /\\ pending \\in SUBSET (Packet \\X Node \\X Node)\n    /\\ src \\in [Packet -> Node]\n    /\\ dst \\in [Packet -> Node]\n    /\\ link \\in [Node -> Node]\n","location":"line 88, col 1 to line 94, col 30 of module learning_switch_i4","operatorName":"TypeOK","type":"State"},{"concreteContent":"TypeOKRandom ==\n    /\\ route_dom \\in RandomSetOfSubsets(35, 5, (Node \\X Node))\n    /\\ route_tc \\in RandomSetOfSubsets(35, 5, {<<x,y,z>> \\in Node \\X Node \\X Node: y=z})\n    /\\ pending \\in RandomSetOfSubsets(35, 5, (Packet \\X Node \\X Node))\n    /\\ src \\in RandomSubset(20, [Packet -> Node])\n    /\\ dst \\in RandomSubset(20, [Packet -> Node])\n    /\\ link \\in RandomSubset(10, [Node -> Node])\n","location":"line 96, col 1 to line 102, col 48 of module learning_switch_i4","operatorName":"TypeOKRandom","type":"State"},{"concreteContent":"Symmetry == Permutations(Node) \\cup Permutations(Packet)","location":"line 104, col 1 to line 104, col 56 of module learning_switch_i4","operatorName":"Symmetry","type":"State"},{"concreteContent":"NextUnchanged == UNCHANGED vars","location":"line 106, col 1 to line 106, col 31 of module learning_switch_i4","operatorName":"NextUnchanged","type":"State"}]}}