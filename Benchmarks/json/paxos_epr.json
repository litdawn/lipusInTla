{"location":"line 1, col 1 to line 167, col 76 of module paxos_epr","moduleInfo":{"location":"line 1, col 1 to line 1, col 81 of module paxos_epr","moduleName":"paxos_epr"},"extends":{"extendedModuleNames":["Integers","FiniteSets","TLC","Randomization"],"location":"line 12, col 1 to line 12, col 48 of module paxos_epr"},"body":{"declaredParams":[{"location":"line 15, col 1 to line 15, col 28 of module paxos_epr","paramName":"Value"}],"definedVariables":[{"variableName":"one_a"},{"variableName":"one_b_max_vote"},{"variableName":"one_b"},{"variableName":"left_rnd"},{"variableName":"proposal"},{"variableName":"vote"},{"variableName":"decision"}],"location":"line 13, col 1 to line 165, col 75 of module paxos_epr","operatorDefinitions":[{"concreteContent":"Round ==  Nat","location":"line 20, col 1 to line 20, col 13 of module paxos_epr","operatorName":"Round","type":"State"},{"concreteContent":"None == -1","location":"line 22, col 1 to line 22, col 10 of module paxos_epr","operatorName":"None","type":"State"},{"concreteContent":"vars == <<one_a,one_b_max_vote,one_b,left_rnd,proposal,vote,decision>>","location":"line 36, col 1 to line 36, col 70 of module paxos_epr","operatorName":"vars","type":"State"},{"concreteContent":"Send1a(b) == \n    /\\ one_a' = one_a \\cup {b}\n    /\\ UNCHANGED <<one_b_max_vote,one_b,left_rnd,proposal,vote,decision>>\n","location":"line 64, col 1 to line 66, col 73 of module paxos_epr","operatorName":"Send1a","paramNum":1,"type":"Action"},{"concreteContent":"JoinRound(n, r) ==\n    \\E maxr \\in Round \\cup {None}, maxv \\in Value : \n        /\\ r \\in one_a\n        /\\ <<n,r>> \\notin left_rnd\n        \\* Send the 1b message.\n        \\* Find maximal vote made by this node in an earlier round.\n        /\\ \\/ (maxr = None /\\ \\A rx \\in Round, vx \\in Value : ~((r > rx) /\\ <<n,rx,vx>> \\in vote))\n           \\/ /\\ maxr # None \n              /\\ (r > maxr) /\\ <<n,maxr,maxv>> \\in vote\n              /\\ (\\A mr \\in Round, v \\in Value : ((r > mr) /\\ <<n,mr,v>> \\in vote) => (mr <= maxr))\n        /\\ one_b_max_vote' = one_b_max_vote \\cup {<<n,r,maxr,maxv>>}\n        /\\ one_b' = one_b \\cup {<<n,r>>}\n        /\\ left_rnd' = left_rnd\n        /\\ UNCHANGED <<one_a,proposal,vote,decision>>\n","location":"line 68, col 1 to line 81, col 53 of module paxos_epr","operatorName":"JoinRound","paramNum":2,"type":"Action"},{"concreteContent":"Propose(r,Q) ==\n    \\E maxr \\in Round \\cup {None}, v \\in Value : \n        /\\ \\/ (maxr = None /\\ \\A n \\in Node, mr \\in Round, mv \\in Value : ~(n \\in Q /\\ (r > mr) /\\ <<n,mr,mv>> \\in vote))\n           \\/ /\\ maxr # None\n              /\\ (\\E n \\in Node : n \\in Q /\\ ~(r <= maxr) /\\ <<n,maxr,v>> \\in vote) \n              /\\ (\\A n \\in Node, mr \\in Round, mv \\in Value : (n \\in Q /\\ ~(r <= mr) /\\ <<n,maxr,mv>> \\in vote) => (mr<=maxr))\n        /\\ \\A mv \\in Value : <<r,mv>> \\notin proposal\n        /\\ \\A n \\in Node : n \\in Q => <<n,r>> \\in one_b\n        /\\ proposal' = proposal \\cup {<<r,v>>}\n        /\\ UNCHANGED <<one_a,one_b_max_vote,one_b,left_rnd,vote,decision>>\n","location":"line 83, col 1 to line 92, col 74 of module paxos_epr","operatorName":"Propose","paramNum":2,"type":"Action"},{"concreteContent":"CastVote(n,v,r) ==\n    /\\ r # None\n    /\\ <<n,r>> \\notin left_rnd\n    /\\ <<r,v>> \\in proposal\n    /\\ vote' = vote \\cup {<<n,r,v>>}\n    /\\ UNCHANGED <<one_a,one_b_max_vote,one_b,left_rnd,proposal,decision>>\n","location":"line 94, col 1 to line 99, col 74 of module paxos_epr","operatorName":"CastVote","paramNum":3,"type":"Action"},{"concreteContent":"Decide(n,r,v,Q) ==\n    /\\ r # None\n    /\\ \\A m \\in Node : m \\in Q => <<m,r,v>> \\in vote\n    /\\ decision' = decision \\cup {<<n,r,v>>}\n    /\\ UNCHANGED <<one_a,one_b_max_vote,one_b,left_rnd,proposal,vote>>\n","location":"line 102, col 1 to line 106, col 70 of module paxos_epr","operatorName":"Decide","paramNum":4,"type":"Action"},{"concreteContent":"Init ==\n    /\\ one_a = {} \\* Round\n    /\\ one_b_max_vote = {} \\* Node \\X Round \\X Round \\X Value\n    /\\ one_b = {} \\* Node \\X Round\n    /\\ left_rnd = {} \\* Node \\X Round\n    /\\ proposal = {} \\* Round \\X Value\n    /\\ vote = {} \\* Node \\X Round \\X Value\n    /\\ decision = {}\n","location":"line 108, col 1 to line 115, col 20 of module paxos_epr","operatorName":"Init","type":"State"},{"concreteContent":"Next == \n    \\/ \\E b \\in Round : Send1a(b)\n    \\/ \\E n \\in Node, r \\in Round : JoinRound(n, r)\n    \\/ \\E r \\in Round, Q \\in Quorum : Propose(r,Q)\n    \\/ \\E n \\in Node, v \\in Value, r \\in Round : CastVote(n,v,r)\n    \\/ \\E n \\in Node, v \\in Value, r \\in Round, Q \\in Quorum : Decide(n,v,r,Q)\n","location":"line 120, col 1 to line 125, col 78 of module paxos_epr","operatorName":"Next","type":"State"},{"concreteContent":"Spec == Init /\\ [][Next]_vars","location":"line 131, col 1 to line 131, col 29 of module paxos_epr","operatorName":"Spec","type":"State"},{"concreteContent":"Symmetry == Permutations(Node) \\cup Permutations(Value)","location":"line 155, col 1 to line 155, col 55 of module paxos_epr","operatorName":"Symmetry","type":"State"},{"concreteContent":"NextUnchanged == UNCHANGED vars","location":"line 157, col 1 to line 157, col 31 of module paxos_epr","operatorName":"NextUnchanged","type":"State"},{"concreteContent":"Safety == \n    \\A n1,n2 \\in Node, r1,r2 \\in Round, v1,v2 \\in Value : \n        (<<n1,r1,v1>> \\in decision /\\ <<n2,r2,v2>> \\in decision) => v1 = v2\n","location":"line 163, col 1 to line 165, col 75 of module paxos_epr","operatorName":"Safety","type":"State"}]}}