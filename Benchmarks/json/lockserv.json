{"location":"line 1, col 1 to line 71, col 4 of module lockserv","moduleInfo":{"location":"line 1, col 1 to line 1, col 25 of module lockserv","moduleName":"lockserv"},"extends":{"extendedModuleNames":["TLC"],"location":"line 2, col 1 to line 2, col 11 of module lockserv"},"body":{"declaredParams":[{"location":"line 4, col 1 to line 4, col 13 of module lockserv","paramName":"Node"}],"definedVariables":[{"variableName":"lock_msg"},{"variableName":"grant_msg"},{"variableName":"unlock_msg"},{"variableName":"holds_lock"},{"variableName":"server_holds_lock"}],"location":"line 4, col 1 to line 69, col 70 of module lockserv","operatorDefinitions":[{"concreteContent":"vars == <<lock_msg, grant_msg, unlock_msg, holds_lock, server_holds_lock>>","location":"line 12, col 1 to line 12, col 74 of module lockserv","operatorName":"vars","type":"State"},{"concreteContent":"SendLock(n) == \n    /\\ lock_msg' = [lock_msg EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<unlock_msg, grant_msg, holds_lock, server_holds_lock>>\n","location":"line 14, col 1 to line 16, col 73 of module lockserv","operatorName":"SendLock","paramNum":1,"type":"Action"},{"concreteContent":"RecvLock(n) == \n    /\\ server_holds_lock\n    /\\ lock_msg[n]\n    /\\ server_holds_lock' = FALSE\n    /\\ lock_msg' = [k \\in Node |-> lock_msg[k] /\\ k # n]\n    /\\ grant_msg' = [grant_msg EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<unlock_msg,holds_lock>>\n","location":"line 18, col 1 to line 24, col 42 of module lockserv","operatorName":"RecvLock","paramNum":1,"type":"Action"},{"concreteContent":"RecvGrant(n) == \n    /\\ grant_msg[n]\n    /\\ grant_msg' = [k \\in Node |-> grant_msg[k] /\\ k # n]\n    /\\ holds_lock' = [holds_lock EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<lock_msg,unlock_msg,server_holds_lock>>\n","location":"line 26, col 1 to line 30, col 58 of module lockserv","operatorName":"RecvGrant","paramNum":1,"type":"Action"},{"concreteContent":"Unlock(n) == \n    /\\ holds_lock[n]\n    /\\ holds_lock' = [k \\in Node |-> holds_lock[k] /\\ k # n]\n    /\\ unlock_msg' = [unlock_msg EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<lock_msg, grant_msg, server_holds_lock>>\n","location":"line 32, col 1 to line 36, col 59 of module lockserv","operatorName":"Unlock","paramNum":1,"type":"Action"},{"concreteContent":"RecvUnlock(n) == \n    /\\ unlock_msg[n]\n    /\\ unlock_msg' = [k \\in Node |-> unlock_msg[k] /\\ k # n]\n    /\\ server_holds_lock' = TRUE\n    /\\ UNCHANGED <<lock_msg, grant_msg, holds_lock>>\n","location":"line 39, col 1 to line 43, col 52 of module lockserv","operatorName":"RecvUnlock","paramNum":1,"type":"Action"},{"concreteContent":"Next ==\n    \\/ \\E n \\in Node : SendLock(n)\n    \\/ \\E n \\in Node : RecvLock(n)\n    \\/ \\E n \\in Node : RecvGrant(n)\n    \\/ \\E n \\in Node : Unlock(n)\n    \\/ \\E n \\in Node : RecvUnlock(n)\n","location":"line 45, col 1 to line 50, col 36 of module lockserv","operatorName":"Next","type":"State"},{"concreteContent":"Init == \n    /\\ lock_msg = [n \\in Node |-> FALSE]\n    /\\ unlock_msg = [n \\in Node |-> FALSE]\n    /\\ grant_msg = [n \\in Node |-> FALSE]\n    /\\ holds_lock = [n \\in Node |-> FALSE]\n    /\\ server_holds_lock = TRUE\n","location":"line 52, col 1 to line 57, col 31 of module lockserv","operatorName":"Init","type":"State"},{"concreteContent":"TypeOK == \n    /\\ lock_msg \\in [Node -> BOOLEAN]\n    /\\ grant_msg \\in [Node -> BOOLEAN]\n    /\\ unlock_msg \\in [Node -> BOOLEAN]\n    /\\ holds_lock \\in [Node -> BOOLEAN]\n    /\\ server_holds_lock \\in BOOLEAN\n","location":"line 59, col 1 to line 64, col 36 of module lockserv","operatorName":"TypeOK","type":"State"},{"concreteContent":"NextUnchanged == UNCHANGED vars","location":"line 66, col 1 to line 66, col 31 of module lockserv","operatorName":"NextUnchanged","type":"State"},{"concreteContent":"Mutex == \\A x,y \\in Node : (holds_lock[x] /\\ holds_lock[y]) => (x = y)","location":"line 69, col 1 to line 69, col 70 of module lockserv","operatorName":"Mutex","type":"State"}]}}