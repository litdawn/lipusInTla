{"location":"line 1, col 1 to line 74, col 4 of module lockserv_automaton","moduleInfo":{"location":"line 1, col 1 to line 1, col 35 of module lockserv_automaton","moduleName":"lockserv_automaton"},"extends":{"extendedModuleNames":["TLC"],"location":"line 4, col 1 to line 4, col 11 of module lockserv_automaton"},"body":{"declaredParams":[{"location":"line 6, col 1 to line 6, col 13 of module lockserv_automaton","paramName":"Node"}],"definedVariables":[{"variableName":"lock_msg"},{"variableName":"unlock_msg"},{"variableName":"grant_msg"},{"variableName":"holds_lock"},{"variableName":"held"}],"location":"line 6, col 1 to line 72, col 70 of module lockserv_automaton","operatorDefinitions":[{"concreteContent":"vars == <<lock_msg, unlock_msg, grant_msg, holds_lock, held>>","location":"line 16, col 1 to line 16, col 61 of module lockserv_automaton","operatorName":"vars","type":"State"},{"concreteContent":"Lock(n) == \n    /\\ lock_msg' = [lock_msg EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<unlock_msg, grant_msg, holds_lock, held>>\n","location":"line 18, col 1 to line 20, col 60 of module lockserv_automaton","operatorName":"Lock","paramNum":1,"type":"Action"},{"concreteContent":"Unlock(n) == \n    /\\ holds_lock[n]\n    /\\ holds_lock' = [holds_lock EXCEPT ![n] = FALSE]\n    /\\ unlock_msg' = [unlock_msg EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<lock_msg, grant_msg, held>>\n","location":"line 22, col 1 to line 26, col 46 of module lockserv_automaton","operatorName":"Unlock","paramNum":1,"type":"Action"},{"concreteContent":"RecvLock(sender) == \n    /\\ lock_msg[sender]\n    /\\ ~held\n    /\\ held' = TRUE\n    /\\ lock_msg' = [lock_msg EXCEPT ![sender] = FALSE]\n    /\\ grant_msg' = [grant_msg EXCEPT ![sender] = TRUE]\n    /\\ UNCHANGED <<unlock_msg,holds_lock>>\n","location":"line 28, col 1 to line 34, col 42 of module lockserv_automaton","operatorName":"RecvLock","paramNum":1,"type":"Action"},{"concreteContent":"RecvGrant(n) == \n    /\\ grant_msg[n]\n    /\\ grant_msg' = [grant_msg EXCEPT ![n] = FALSE]\n    /\\ holds_lock' = [holds_lock EXCEPT ![n] = TRUE]\n    /\\ UNCHANGED <<lock_msg,unlock_msg,held>>\n","location":"line 36, col 1 to line 40, col 45 of module lockserv_automaton","operatorName":"RecvGrant","paramNum":1,"type":"Action"},{"concreteContent":"RecvUnlock(sender) == \n    /\\ unlock_msg[sender]\n    /\\ unlock_msg' = [unlock_msg EXCEPT ![sender] = FALSE]\n    /\\ held' = FALSE\n    /\\ UNCHANGED <<lock_msg, grant_msg, holds_lock>>\n","location":"line 42, col 1 to line 46, col 52 of module lockserv_automaton","operatorName":"RecvUnlock","paramNum":1,"type":"Action"},{"concreteContent":"Next ==\n    \\/ \\E n \\in Node : Lock(n)\n    \\/ \\E n \\in Node : Unlock(n)\n    \\/ \\E n \\in Node : RecvLock(n)\n    \\/ \\E n \\in Node : RecvGrant(n)\n    \\/ \\E n \\in Node : RecvUnlock(n)\n","location":"line 48, col 1 to line 53, col 36 of module lockserv_automaton","operatorName":"Next","type":"State"},{"concreteContent":"Init == \n    /\\ lock_msg = [n \\in Node |-> FALSE]\n    /\\ unlock_msg = [n \\in Node |-> FALSE]\n    /\\ grant_msg = [n \\in Node |-> FALSE]\n    /\\ holds_lock = [n \\in Node |-> FALSE]\n    /\\ held = FALSE\n","location":"line 55, col 1 to line 60, col 19 of module lockserv_automaton","operatorName":"Init","type":"State"},{"concreteContent":"NextUnchanged == UNCHANGED vars","location":"line 62, col 1 to line 62, col 31 of module lockserv_automaton","operatorName":"NextUnchanged","type":"State"},{"concreteContent":"TypeOK == \n    /\\ lock_msg \\in [Node -> BOOLEAN]\n    /\\ unlock_msg \\in [Node -> BOOLEAN]\n    /\\ grant_msg \\in [Node -> BOOLEAN]\n    /\\ holds_lock \\in [Node -> BOOLEAN]\n    /\\ held \\in BOOLEAN\n","location":"line 64, col 1 to line 69, col 23 of module lockserv_automaton","operatorName":"TypeOK","type":"State"},{"concreteContent":"Mutex == \\A x,y \\in Node : (holds_lock[x] /\\ holds_lock[y]) => (x = y)","location":"line 72, col 1 to line 72, col 70 of module lockserv_automaton","operatorName":"Mutex","type":"State"}]}}